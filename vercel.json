{
  "buildCommand": "chmod +x build.sh && bash build.sh",
  "installCommand": "echo 'Skipping install, using buildCommand'",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/api/index.py"
    }
  ],
  "functions": {
    "api/index.py": {
      "excludeFiles": "**/{.git,__pycache__,.pytest_cache,*.pyc,*.pyo,*.pyd,.venv,venv,env,ENV,node_modules,.next,.cache,dist,build,*.md,*.txt,*.sql,*.sh,scripts/**,database/**,static/**,*.png,*.jpg,*.jpeg,*.gif,*.svg,*.pdf,*.zip,*.tar.gz,tests/**,test/**,*_test.py,test_*.py,*.log,*.tmp,.DS_Store,Thumbs.db}"
    }
  },
  "env": {
    "PYTHONUNBUFFERED": "1",
    "PYTHONDONTWRITEBYTECODE": "1",
    "PYTHONHASHSEED": "random",
    "TRANSFORMERS_CACHE": "/tmp/transformers_cache",
    "HF_HOME": "/tmp/hf_home",
    "SENTENCE_TRANSFORMERS_HOME": "/tmp/st_cache",
    "SENTENCE_TRANSFORMERS_DEVICE": "cpu",
    "TORCH_HOME": "/tmp/torch_cache",
    "XDG_CACHE_HOME": "/tmp",
    "HF_DATASETS_CACHE": "/tmp/hf_datasets_cache",
    "HF_METRICS_CACHE": "/tmp/hf_metrics_cache",
    "HF_MODULES_CACHE": "/tmp/hf_modules_cache",
    "TOKENIZERS_PARALLELISM": "false",
    "OMP_NUM_THREADS": "1",
    "MKL_NUM_THREADS": "1",
    "NUMEXPR_NUM_THREADS": "1",
    "OPENBLAS_NUM_THREADS": "1"
  }
}

